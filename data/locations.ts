// ==========================================
// 1. HOSPITAL DATABASE (Expanded Central Kerala)
// ==========================================
export const HOSPITALS = [
    // --- ALAPPUZHA DISTRICT ---
    { id: 'alp_gmc', name: 'Govt T.D. Medical College, Vandanam', lat: 9.4530, lng: 76.3323 },
    { id: 'alp_gen', name: 'General Hospital, Alappuzha (Beach)', lat: 9.4938, lng: 76.3262 },
    { id: 'alp_wac', name: 'Women & Children Hospital, Alappuzha', lat: 9.4900, lng: 76.3300 },
    { id: 'alp_tal_che', name: 'Taluk Head Quarters Hospital, Cherthala', lat: 9.6845, lng: 76.3384 },
    { id: 'alp_kvm', name: 'KVM Hospital, Cherthala', lat: 9.6900, lng: 76.3400 },
    { id: 'alp_kind', name: 'Kinder Hospital, Cherthala', lat: 9.6950, lng: 76.3200 },
    { id: 'alp_sgh', name: 'Sahrudaya Hospital, Alappuzha', lat: 9.4880, lng: 76.3450 },
    { id: 'alp_tal_eda', name: 'Taluk Hospital, Edathua', lat: 9.3667, lng: 76.4833 },
    { id: 'alp_tal_kay', name: 'Taluk Head Quarters Hospital, Kayamkulam', lat: 9.1760, lng: 76.5000 },
    { id: 'alp_tal_mav', name: 'District Hospital, Mavelikara', lat: 9.2435, lng: 76.5448 },
    { id: 'alp_tal_cgn', name: 'Taluk Head Quarters Hospital, Chengannur', lat: 9.3175, lng: 76.6167 },
    { id: 'alp_tal_har', name: 'Taluk Head Quarters Hospital, Haripad', lat: 9.2550, lng: 76.4600 },
    { id: 'alp_tal_pul', name: 'Taluk Hospital, Pulincunnoo', lat: 9.4500, lng: 76.4833 },
    { id: 'alp_vsm', name: 'VSM Hospital, Mavelikara', lat: 9.2500, lng: 76.5400 },
    { id: 'alp_prov', name: 'Providence Hospital, Alappuzha', lat: 9.5050, lng: 76.3350 },
    { id: 'alp_stseb', name: 'St. Sebastians Visitation Hospital, Arthunkal', lat: 9.6333, lng: 76.3000 },
    { id: 'alp_cent', name: 'Century Hospital, Chengannur', lat: 9.3200, lng: 76.6100 },
    { id: 'alp_hds', name: 'Sree Narayana Medical Mission, Cherthala', lat: 9.6800, lng: 76.3400 },
    { id: 'alp_parumala', name: 'St. Gregorios Medical Mission, Parumala', lat: 9.3514, lng: 76.5567 },
    { id: 'alp_chc_kainakary', name: 'CHC Kainakary (Kuttanad)', lat: 9.5000, lng: 76.4000 },
    { id: 'alp_chc_veliyanad', name: 'CHC Veliyanad', lat: 9.4667, lng: 76.5000 },

    // --- KOTTAYAM DISTRICT (Updated) ---
    { id: 'ktm_gmc', name: 'Govt Medical College (Gandhinagar), Kottayam', lat: 9.6178, lng: 76.5369 },
    { id: 'ktm_gen_ktm', name: 'General Hospital, Kottayam', lat: 9.5850, lng: 76.5250 },
    { id: 'ktm_gen_chry', name: 'General Hospital, Changanassery', lat: 9.4452, lng: 76.5402 },
    { id: 'ktm_tal_pal', name: 'General Hospital, Pala', lat: 9.7100, lng: 76.6800 },
    { id: 'ktm_tal_kan', name: 'General Hospital, Kanjirappally', lat: 9.5550, lng: 76.7850 },
    { id: 'ktm_tal_vai', name: 'Taluk Head Quarters Hospital, Vaikom', lat: 9.7500, lng: 76.4000 },
    { id: 'ktm_tal_pam', name: 'Taluk Hospital, Pampady', lat: 9.5667, lng: 76.6333 },
    { id: 'ktm_tal_kur', name: 'Taluk Hospital, Kuravilangad', lat: 9.7500, lng: 76.5667 },
    { id: 'ktm_tal_era', name: 'Taluk Hospital, Erattupetta', lat: 9.7000, lng: 76.7833 },
    { id: 'ktm_car', name: 'Caritas Hospital, Thellakom', lat: 9.6380, lng: 76.5450 },
    { id: 'ktm_matha', name: 'Matha Hospital, Thellakom', lat: 9.6350, lng: 76.5400 },
    { id: 'ktm_bharath', name: 'Bharath Hospital, Kottayam', lat: 9.5800, lng: 76.5300 },
    { id: 'ktm_stthom', name: 'St. Thomas Hospital, Chethipuzha', lat: 9.4600, lng: 76.5500 },
    { id: 'ktm_ns_chg', name: 'NSS Medical Mission, Changanassery', lat: 9.4500, lng: 76.5400 },
    { id: 'ktm_mar_pal', name: 'Marian Medical Centre, Pala', lat: 9.7150, lng: 76.6850 },
    { id: 'ktm_mry_qns', name: 'Mary Queens Mission Hospital, Kanjirappally', lat: 9.5600, lng: 76.7900 },
    { id: 'ktm_indo', name: 'Indo-American Hospital, Vaikom', lat: 9.7600, lng: 76.4100 },
    { id: 'ktm_sh', name: 'SH Medical Centre, Kottayam', lat: 9.5900, lng: 76.5200 },
    { id: 'ktm_mandiram', name: 'Mandiram Hospital, Manganam', lat: 9.5700, lng: 76.5500 },
    { id: 'ktm_kims', name: 'KIMS Health, Kottayam', lat: 9.5700, lng: 76.5400 },
    { id: 'ktm_mercy', name: 'Mercy Hospital, Changancherry', lat: 9.4400, lng: 76.5350 },
    { id: 'ktm_holycross', name: 'Holy Cross Hospital, Aymanam', lat: 9.6100, lng: 76.5000 },

    // --- PATHANAMTHITTA DISTRICT ---
    { id: 'pta_gen', name: 'General Hospital, Pathanamthitta', lat: 9.2647, lng: 76.7870 },
    { id: 'pta_gen_ado', name: 'General Hospital, Adoor', lat: 9.1550, lng: 76.7350 },
    { id: 'pta_push', name: 'Pushpagiri Medical College, Thiruvalla', lat: 9.3871, lng: 76.5744 },
    { id: 'pta_bel', name: 'Believers Church Medical College, Thiruvalla', lat: 9.3650, lng: 76.6000 },
    { id: 'pta_tmh', name: 'Tiruvalla Medical Mission (TMM)', lat: 9.3800, lng: 76.5700 },
    { id: 'pta_muth_pta', name: 'Muthoot Medical Centre, Pathanamthitta', lat: 9.2650, lng: 76.7900 },
    { id: 'pta_muth_koz', name: 'Muthoot Hospital, Kozhencherry', lat: 9.3400, lng: 76.7050 },
    { id: 'pta_mgm', name: 'MGM Muthoot Medical Centre, Pathanamthitta', lat: 9.2700, lng: 76.7800 },
    { id: 'pta_fel', name: 'Fellowship Hospital, Kumbanad', lat: 9.3550, lng: 76.6400 },
    { id: 'pta_lifeline', name: 'Life Line Hospital, Adoor', lat: 9.1500, lng: 76.7400 },
    { id: 'pta_tal_ran', name: 'Taluk Head Quarters Hospital, Ranni', lat: 9.3850, lng: 76.8050 },
    { id: 'pta_tal_kon', name: 'Taluk Head Quarters Hospital, Konni', lat: 9.2400, lng: 76.8600 },
    { id: 'pta_tal_mal', name: 'Taluk Head Quarters Hospital, Mallappally', lat: 9.4500, lng: 76.6500 },
    { id: 'pta_tal_thi', name: 'Taluk Head Quarters Hospital, Thiruvalla', lat: 9.3800, lng: 76.5700 },
    { id: 'pta_chc_ezh', name: 'Community Health Centre, Ezhumattoor', lat: 9.4333, lng: 76.7000 },
];

// ==========================================
// 2. TOWN & VILLAGE MAPPING (Coordinates)
// ==========================================
export const TOWN_COORDINATES: Record<string, { lat: number; lng: number }> = {

    // --- ALAPPUZHA DISTRICT ---
    "alappuzha": { lat: 9.4981, lng: 76.3388 },
    "alleppey": { lat: 9.4981, lng: 76.3388 },
    "muttar": { lat: 9.3900, lng: 76.5200 },
    "edathua": { lat: 9.3667, lng: 76.4833 },
    "thakazhy": { lat: 9.3833, lng: 76.4167 },
    "champakulam": { lat: 9.4167, lng: 76.4167 },
    "pulincunnoo": { lat: 9.4500, lng: 76.4833 },
    "moncombu": { lat: 9.4333, lng: 76.4667 },
    "mankombu": { lat: 9.4333, lng: 76.4667 },
    "kainakary": { lat: 9.5000, lng: 76.4000 },
    "nedumudi": { lat: 9.4333, lng: 76.4000 },
    "kavalam": { lat: 9.5000, lng: 76.4667 },
    "neerattupuram": { lat: 9.3850, lng: 76.5000 },
    "thalavady": { lat: 9.3600, lng: 76.4900 },
    "veeyapuram": { lat: 9.3000, lng: 76.4300 },
    "kidangara": { lat: 9.4333, lng: 76.5167 },
    "ramankary": { lat: 9.4167, lng: 76.4833 },
    "veliyanad": { lat: 9.4667, lng: 76.5000 },
    "ambalapuzha": { lat: 9.3833, lng: 76.3500 },
    "punnapra": { lat: 9.4333, lng: 76.3500 },
    "vandanam": { lat: 9.4500, lng: 76.3333 },
    "thottappally": { lat: 9.3167, lng: 76.3833 },
    "purakkad": { lat: 9.3500, lng: 76.3667 },
    "haripad": { lat: 9.2500, lng: 76.4667 },
    "cheppad": { lat: 9.2333, lng: 76.4500 },
    "kayamkulam": { lat: 9.1728, lng: 76.5003 },
    "krishnapuram": { lat: 9.1500, lng: 76.5167 },
    "ochira": { lat: 9.1333, lng: 76.5000 },
    "mavelikara": { lat: 9.2435, lng: 76.5448 },
    "chettikulangara": { lat: 9.2167, lng: 76.5333 },
    "chengannur": { lat: 9.3175, lng: 76.6167 },
    "mannar": { lat: 9.3333, lng: 76.5500 },
    "budhanoor": { lat: 9.3000, lng: 76.5833 },
    "cherthala": { lat: 9.6845, lng: 76.3384 },
    "arthunkal": { lat: 9.6333, lng: 76.3000 },
    "pattanakkad": { lat: 9.7167, lng: 76.3167 },
    "kuthiathode": { lat: 9.7667, lng: 76.3167 },
    "thuravoor": { lat: 9.7500, lng: 76.3167 },
    "aroor": { lat: 9.8667, lng: 76.3000 },
    "muhamma": { lat: 9.5833, lng: 76.3667 },
    "kanjikuzhy": { lat: 9.6500, lng: 76.3500 },
    "thanneermukkom": { lat: 9.6167, lng: 76.4000 },
    "karthikappally": { lat: 9.2833, lng: 76.4500 },

    // --- KOTTAYAM DISTRICT ---
    "kottayam": { lat: 9.5916, lng: 76.5222 },
    "gandhinagar": { lat: 9.6178, lng: 76.5369 },
    "kumarakom": { lat: 9.6167, lng: 76.4333 },
    "aimanam": { lat: 9.6167, lng: 76.5000 },
    "ettumanoor": { lat: 9.6667, lng: 76.5667 },
    "athirampuzha": { lat: 9.6500, lng: 76.5333 },
    "pala": { lat: 9.7000, lng: 76.6833 },
    "ramapuram": { lat: 9.7833, lng: 76.6500 },
    "kidangoor": { lat: 9.6833, lng: 76.6000 },
    "kuravilangad": { lat: 9.7500, lng: 76.5667 },
    "uzhavoor": { lat: 9.7833, lng: 76.6167 },
    "vaikom": { lat: 9.7500, lng: 76.4000 },
    "thalayolaparambu": { lat: 9.8000, lng: 76.4333 },
    "kaduthuruthy": { lat: 9.7333, lng: 76.5167 },
    "changanassery": { lat: 9.4452, lng: 76.5402 },
    "changanacherry": { lat: 9.4452, lng: 76.5402 },
    "perunna": { lat: 9.4333, lng: 76.5333 },
    "chethipuzha": { lat: 9.4600, lng: 76.5500 },
    "thrikkodithanam": { lat: 9.4667, lng: 76.5833 },
    "kurichy": { lat: 9.5000, lng: 76.5500 },
    "chingavanam": { lat: 9.5167, lng: 76.5333 },
    "pallom": { lat: 9.5500, lng: 76.5333 },
    "kanjirappally": { lat: 9.5550, lng: 76.7850 },
    "mundakayam": { lat: 9.5167, lng: 76.8833 },
    "erattupetta": { lat: 9.7000, lng: 76.7833 },
    "poonjar": { lat: 9.6833, lng: 76.8167 },
    "pampady": { lat: 9.5667, lng: 76.6333 },
    "manarcad": { lat: 9.5833, lng: 76.5833 },
    "ayarkunnam": { lat: 9.6167, lng: 76.6000 },
    "ponkunnam": { lat: 9.5667, lng: 76.7500 },
    "karukachal": { lat: 9.5333, lng: 76.6333 },
    "manimala": { lat: 9.4500, lng: 76.7667 },
    "thiruvarppu": { lat: 9.6000, lng: 76.4833 },
    "aymanam": { lat: 9.6167, lng: 76.5000 },
    "kottayam_town": { lat: 9.5916, lng: 76.5222 },

    // --- PATHANAMTHITTA DISTRICT ---
    "pathanamthitta": { lat: 9.2647, lng: 76.7870 },
    "thiruvalla": { lat: 9.3833, lng: 76.5667 },
    "tiruvalla": { lat: 9.3833, lng: 76.5667 },
    "kavumbhagom": { lat: 9.3667, lng: 76.5500 },
    "muthoor": { lat: 9.3833, lng: 76.5500 },
    "kuttoor": { lat: 9.3667, lng: 76.5833 },
    "kumbanad": { lat: 9.3550, lng: 76.6400 },
    "pullad": { lat: 9.3500, lng: 76.6667 },
    "kozhencherry": { lat: 9.3400, lng: 76.7050 },
    "maramon": { lat: 9.3500, lng: 76.6833 },
    "aranmula": { lat: 9.3333, lng: 76.6833 },
    "mallappally": { lat: 9.4500, lng: 76.6500 },
    "vennikkulam": { lat: 9.4167, lng: 76.6500 },
    "ezhumattoor": { lat: 9.4333, lng: 76.7000 },
    "ranni": { lat: 9.3850, lng: 76.8050 },
    "perunad": { lat: 9.3667, lng: 76.8667 },
    "vadasserikkara": { lat: 9.3500, lng: 76.8333 },
    "konni": { lat: 9.2400, lng: 76.8600 },
    "kalanjoor": { lat: 9.1500, lng: 76.9000 },
    "adoor": { lat: 9.1550, lng: 76.7350 },
    "pandalam": { lat: 9.2333, lng: 76.6833 },
    "kulanada": { lat: 9.2667, lng: 76.6833 },
    "omalloor": { lat: 9.2333, lng: 76.7667 },
    "parumala": { lat: 9.3514, lng: 76.5567 },
    "kadapra": { lat: 9.3333, lng: 76.5333 },
    "niranam": { lat: 9.3500, lng: 76.5167 },
    "podiyadi": { lat: 9.3667, lng: 76.5333 },
    "kallissery": { lat: 9.3167, lng: 76.6000 },
};

// ==========================================
// 3. DISTANCE CALCULATION LOGIC
// ==========================================
// Returns distance in Kilometers
export const getDistance = (lat1: number, lon1: number, lat2: number, lon2: number) => {
    const R = 6371; // Radius of Earth in km
    const dLat = deg2rad(lat2 - lat1);
    const dLon = deg2rad(lon2 - lon1);
    const a =
        Math.sin(dLat / 2) * Math.sin(dLat / 2) +
        Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *
        Math.sin(dLon / 2) * Math.sin(dLon / 2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    return Math.round(R * c);
};

const deg2rad = (deg: number) => {
    return deg * (Math.PI / 180);
};